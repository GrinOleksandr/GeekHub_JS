!function(t){var e={};function o(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="dist/",o(o.s=0)}([function(t,e,o){"use strict";function r(){this.listeners=[],this.taskCounter=this.getFromLocalStorage("taskCounter")||0,this.storageForTasks=[];for(var t=0;t<this.taskCounter;t++)this.storageForTasks.push(this.getFromLocalStorage(t));for(var e=[],o=0;o<this.taskCounter;o++){var r=this.getFromLocalStorage(o);r&&e.push(r)}localStorage.clear(),this.storageForTasks=[],this.saveToLocalStorage("taskCounter",this.taskCounter);for(var n=0;n<e.length;n++){e[n].taskIndex=n,this.saveToLocalStorage(n,e[n]),this.storageForTasks.push(e[n])}}function n(t,e,o){var r=document.getElementById("input_task");function n(e){var n=document.createElement("li");n.dataset.index=e.taskIndex,n.draggable=!0,n.addEventListener("dragover",o.onDragOver),n.addEventListener("dragstart",o.onDragStart),n.addEventListener("drop",o.onDragDrop,!0);var a=document.createElement("input");a.type="checkbox",a.addEventListener("click",function(t){o.onDone(t)});var s=document.createElement("span");s.className="taskInnerText",s.innerText=e.text,!0===e.done&&(s.style.backgroundColor="green",s.style.textDecoration="line-through",a.checked=!0);var i=document.createElement("span");i.className="time",i.innerText=e.time;var c=document.createElement("button");c.innerHTML="Delete",c.className="delButton",c.addEventListener("click",o.onDelete),n.appendChild(a),n.appendChild(s),n.appendChild(i),n.appendChild(c),t.appendChild(n),r.value=""}document.getElementById("add_task_button").addEventListener("click",function(){o.onAddTask(r.value)}),document.getElementById("reverse_button").addEventListener("click",function(){o.onReverse(e,e.storageForTasks)}),document.getElementById("clear_button").addEventListener("click",function(){o.onClearList(t)}),e.on("add",function(t){n(t)}),e.on("reverse",function(e){!function(e){t.innerHTML="",e.storageForTasks&&e.storageForTasks.forEach(function(t){n(t)})}(e)}),e.on("clear",function(){!function(t){t.innerHTML=""}(t)}),e.on("done",function(e){!function(e){var o=t.querySelector('li[data-index = "'.concat(e.taskIndex,'"] span ')),r=t.querySelector('li[data-index = "'.concat(e.taskIndex,'"]')).firstChild;!0===e.done?(r.checked=!0,o.style.backgroundColor="green",o.style.textDecoration="line-through"):(r.checked=!1,o.style.backgroundColor="#ff5b3f",o.style.textDecoration="none")}(e)}),e.on("delete",function(t){!function(t){t.target.parentElement.remove()}(t)}),e.on("dragstart",function(t){}),e.on("dragover",function(t){!function(t){t.preventDefault()}(t)}),e.on("dragdrop",function(o){t.innerHTML="",e.storageForTasks&&e.storageForTasks.forEach(function(t){n(t)})}),e.storageForTasks&&e.storageForTasks.forEach(function(t){n(t)})}o.r(e),r.prototype=Object.create(Array.prototype),r.prototype.add=function(t,e,o){if(t){this.taskCounter=this.getFromLocalStorage("taskCounter")||0;var r={text:t,time:this.time||this.setTime(),done:o||!1,taskIndex:this.taskCounter};this.storageForTasks[this.taskCounter]=r,this.saveToLocalStorage(this.taskCounter,r),this.taskCounter++,this.saveToLocalStorage("taskCounter",this.taskCounter),this.emit("add",[r])}},r.prototype.reverseList=function(t){for(var e=[],o=0;o<this.taskCounter;o++){var r=this.getFromLocalStorage(o);r&&e.push(r)}localStorage.clear(),this.storageForTasks=[],this.saveToLocalStorage("taskCounter",this.taskCounter),e.reverse();for(var n=0;n<e.length;n++){e[n].taskIndex=n,this.saveToLocalStorage(n,e[n]),this.storageForTasks.push(e[n])}this.emit("reverse",[t])},r.prototype.done=function(t){var e=this.storageForTasks[t.target.parentElement.dataset.index];e.done?e.done=!1:e.done=!0,this.saveToLocalStorage(e.taskIndex,e),this.emit("done",[e])},r.prototype.delete=function(t){var e=t.target.parentElement.dataset.index;this.storageForTasks.splice(this.storageForTasks[e]-1,1),localStorage.removeItem(e),this.emit("delete",[t])},r.prototype.clearList=function(){this.storageForTasks=[],localStorage.clear(),this.emit("clear",this)},r.prototype.on=function(t,e){this.listeners.push({event:t,callback:e})},r.prototype.emit=function(t,e){var o=this;this.listeners.forEach(function(r){r.event===t&&r.callback.apply(o,e)})},r.prototype.saveToLocalStorage=function(t,e){void 0===e?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(e))},r.prototype.getFromLocalStorage=function(t){var e=localStorage.getItem(t);if(void 0!==e)return JSON.parse(e)},r.prototype.setTime=function(){var t=new Date;return[t.getHours(),t.getMinutes()].map(function(t){return t<10?"0"+t:t}).join(":")},r.prototype.dragOver=function(t){t.stopPropagation(),this.emit("dragover",[t])},r.prototype.dragStart=function(t){var e=t.target;this.dragStartElementIndex=e.dataset.index,this.emit("dragstart",[t])},r.prototype.dragDrop=function(t){var e=t.target;e.dataset.index?this.dragTargetElementIndex=e.dataset.index:this.dragTargetElementIndex=e.parentElement.dataset.index,this.emit("dragdrop",[t]),t.stopPropagation();for(var o=this.storageForTasks[this.dragStartElementIndex],r=[],n=0;n<this.taskCounter;n++)r.push(this.getFromLocalStorage(n));r.splice(this.dragStartElementIndex,1),r.splice(this.dragTargetElementIndex,0,o),localStorage.clear(),this.storageForTasks=[],this.saveToLocalStorage("taskCounter",this.taskCounter);for(var a=0;a<r.length;a++){r[a].taskIndex=a,this.saveToLocalStorage(a,r[a]),this.storageForTasks.push(r[a])}this.emit("dragdrop",[t])};o(1);document.addEventListener("DOMContentLoaded",function(){var t,e;t=document.getElementById("toDoList"),e=new r,n(t,e,{onAddTask:function(t){e.add(t)},onDone:function(t){e.done(t)},onReverse:function(t){t.reverseList(e)},onClearList:function(t){e.clearList(t)},onDelete:function(t){e.delete(t)},onDragDrop:function(t){e.dragDrop(t)},onDragStart:function(t){e.dragStart(t)},onDragOver:function(t){e.dragOver(t)}})})},function(t,e){}]);